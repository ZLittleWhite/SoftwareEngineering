(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5a912344"],{"1e4bf":function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{directives:[{name:"show",rawName:"v-show",value:e.shouldLogin,expression:"shouldLogin"}]},[n("div",{staticClass:"noThings"},[n("div",[n("van-nav-bar",{attrs:{title:"用户登录","left-text":"返回","left-arrow":""},on:{"click-left":function(t){return e.backToMine(e.shouldLogin)}}})],1)]),n("van-form",{on:{submit:e.onSubmit}},[n("van-field",{attrs:{name:"name",label:"用户名",placeholder:"用户名",rules:[{required:!0,message:"请填写用户名"}]},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),n("van-field",{attrs:{type:"password",name:"pwd",label:"密码",placeholder:"密码",rules:[{required:!0,message:"请填写密码"}]},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),n("div",{staticStyle:{margin:"16px"}},[n("van-button",{attrs:{round:"",block:"",type:"info","native-type":"submit"}},[e._v("\n                    提交\n                ")])],1)],1)],1),n("div",{directives:[{name:"show",rawName:"v-show",value:!e.shouldLogin,expression:"!shouldLogin"}]},[n("div",[n("van-nav-bar",{attrs:{title:"个人信息","left-text":"返回","left-arrow":""},on:{"click-left":function(t){return e.backToMine()}}})],1),n("div",[n("van-cell-group",[n("van-cell",{attrs:{title:""},scopedSlots:e._u([{key:"label",fn:function(){return[n("div",[n("br"),n("b",{staticStyle:{"font-size":"15px",color:"#575757",margin:"20px 0 0 0"}},[e._v(" 头像")])])]},proxy:!0},{key:"extra",fn:function(){return[n("div",[n("van-image",{attrs:{width:"3rem",height:"3rem",src:"https://img.yzcdn.cn/vant/cat.jpeg"}})],1)]},proxy:!0}])})],1),e._l(e.userList,function(e,t){return n("van-cell-group",{key:t},[n("van-cell",{attrs:{title:e.title,value:e.value,"is-link":""}})],1)})],2),n("div",[n("van-notice-bar",{attrs:{color:"#1989fa",background:"#ecf9ff",scrollable:"","left-icon":"volume-o",text:"返回可能将导致数据丢失，可能需要重新登录"}})],1),n("div",[n("van-row",[n("van-col",{staticClass:"cancelLogin",attrs:{span:"24"}},[n("van-button",{attrs:{round:"",icon:"wap-home-o",type:"info"},on:{click:e.removeLogin}},[e._v("\n                        注销登录\n                    ")])],1)],1)],1)])])},a=[],i=(n("7f7f"),n("2b0e")),s=n("d399");i["a"].use(s["a"]);var l={name:"login",data:function(){return{username:"",password:"",shouldLogin:!0,userList:[{title:"二维码名片",value:""},{title:"昵称",value:"周敌"},{title:"手机号",value:"17379896567"},{title:"更多",value:""},{title:"我的地址",value:""}]}},methods:{removeLogin:function(){localStorage.setItem("shouldLogin",1),localStorage.removeItem("username"),this.$router.push("/mine")},backToMine:function(){this.$router.push("/mine")},onSubmit:function(e){var t=this;console.log("submit",e);var n="http://webforah:90/fdmapi/login";this.$axios.post(n,{username:e.name,password:e.pwd}).then(function(e){if(console.log(e.data.code),1==e.data.code){localStorage.setItem("shouldLogin",0),localStorage.setItem("username",t.username),t.userList[1].value=t.username;var n=s["a"].loading({duration:0,forbidClick:!0,message:"稍等片刻"}),o=1,a=setInterval(function(){o--,o?n.message="":(t.shouldLogin=!1,clearInterval(a),s["a"].clear())},1e3)}else s["a"].fail("用户不存在"),t.username="",t.password=""}).catch(function(e){console.log(e)})},getShouldLoginValue:function(){var e=localStorage.getItem("shouldLogin");console.log("login",e),0==e&&(this.shouldLogin=!1),void 0!==e&&null!==e||(this.shouldLogin=!0)},getUsernameFromSession:function(){var e=localStorage.getItem("username");void 0===e||null===e?console.log("未登陆"):(console.log(e),this.userList[1].value=e)}},created:function(){this.getUsernameFromSession()},mounted:function(){this.getShouldLoginValue()}},r=l,u=(n("face"),n("2877")),c=Object(u["a"])(r,o,a,!1,null,"65cb63d4",null);t["default"]=c.exports},"7f7f":function(e,t,n){var o=n("86cc").f,a=Function.prototype,i=/^\s*function ([^ (]*)/,s="name";s in a||n("9e1e")&&o(a,s,{configurable:!0,get:function(){try{return(""+this).match(i)[1]}catch(e){return""}}})},d3fb:function(e,t,n){},face:function(e,t,n){"use strict";var o=n("d3fb"),a=n.n(o);a.a}}]);
//# sourceMappingURL=chunk-5a912344.2f8a7c5f.js.map